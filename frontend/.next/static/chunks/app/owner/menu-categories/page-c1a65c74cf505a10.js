(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{572:function(e,n,t){Promise.resolve().then(t.bind(t,7344)),Promise.resolve().then(t.bind(t,4440))},7648:function(e,n,t){"use strict";t.d(n,{default:function(){return s.a}});var r=t(2972),s=t.n(r)},9376:function(e,n,t){"use strict";var r=t(5475);t.o(r,"usePathname")&&t.d(n,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(n,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(n,{useSearchParams:function(){return r.useSearchParams}})},257:function(e,n,t){"use strict";var r,s;e.exports=(null==(r=t.g.process)?void 0:r.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(4227)},4227:function(e){!function(){var n={229:function(e){var n,t,r,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{t="function"==typeof clearTimeout?clearTimeout:a}catch(e){t=a}}();var i=[],l=!1,c=-1;function d(){l&&r&&(l=!1,r.length?i=r.concat(i):c=-1,i.length&&f())}function f(){if(!l){var e=u(d);l=!0;for(var n=i.length;n;){for(r=i,i=[];++c<n;)r&&r[c].run();c=-1,n=i.length}r=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===a||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(n){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function m(){}s.nextTick=function(e){var n=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];i.push(new h(e,n)),1!==i.length||l||u(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function r(e){var s=t[e];if(void 0!==s)return s.exports;var o=t[e]={exports:{}},a=!0;try{n[e](o,o.exports,r),a=!1}finally{a&&delete t[e]}return o.exports}r.ab="//";var s=r(229);e.exports=s}()},7344:function(e,n,t){"use strict";t.d(n,{default:function(){return u}});var r=t(7437),s=t(9376),o=t(2265),a=t(1837);function u(e){let{categories:n}=e,t=(0,s.useRouter)(),[u,i]=(0,o.useState)(""),[l,c]=(0,o.useState)(null),[d,f]=(0,o.useState)(!1);async function h(e){if(e.preventDefault(),c(null),u.trim()){f(!0);try{await (0,a.S)("/menu-categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:u})}),i(""),t.refresh()}catch(e){c((null==e?void 0:e.message)||"Failed to create")}finally{f(!1)}}}async function m(e){if(confirm("Delete this category?")){f(!0),c(null);try{await (0,a.S)("/menu-categories/".concat(e),{method:"DELETE"}),t.refresh()}catch(e){c((null==e?void 0:e.message)||"Failed to delete")}finally{f(!1)}}}return(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("form",{onSubmit:h,className:"flex gap-2",children:[(0,r.jsx)("input",{className:"flex-1 rounded border p-2",placeholder:"New category name",value:u,onChange:e=>i(e.target.value)}),(0,r.jsx)("button",{className:"rounded bg-blue-600 px-4 py-2 text-white disabled:opacity-60",disabled:d,type:"submit",children:"Add"})]}),l&&(0,r.jsx)("div",{className:"mt-2 rounded border border-red-200 bg-red-50 p-2 text-sm text-red-700",children:l}),(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[n.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded border bg-white p-3",children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsx)("button",{className:"rounded border px-2 py-1 text-xs",disabled:d,onClick:()=>m(e.id),type:"button",children:"Delete"})]},e.id)),0===n.length&&(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"No categories yet."})]})]})}},4440:function(e,n,t){"use strict";t.d(n,{default:function(){return l}});var r=t(7437),s=t(7648),o=t(9376),a=t(1837),u=t(2265),i=t(82);function l(e){let{role:n}=e,t=(0,o.useRouter)(),[l,c]=(0,u.useState)("en");async function d(){try{await (0,a.S)("/auth/logout",{method:"POST"})}catch(e){}t.push("/login"),t.refresh()}(0,u.useEffect)(()=>{if("undefined"==typeof document)return;let e=document.cookie.match(/(?:^|; )lang=([^;]+)/);c((0,i.AE)(e?decodeURIComponent(e[1]):"en"))},[]);let f="OWNER"===n||"MANAGER"===n,h="OWNER"===n;return(0,r.jsxs)("nav",{className:"mb-4 flex flex-wrap items-center gap-4",children:[(0,r.jsx)(s.default,{href:"/owner/dashboard",className:"underline",children:(0,i.t)(l,"dashboard")}),(0,r.jsx)(s.default,{href:"/owner/sessions",className:"underline",children:"Sessions"}),(0,r.jsx)(s.default,{href:"/owner/bookings",className:"underline",children:(0,i.t)(l,"bookings")}),(0,r.jsx)(s.default,{href:"/owner/requests",className:"underline",children:(0,i.t)(l,"requests")}),f?(0,r.jsx)(s.default,{href:"/owner/menu",className:"underline",children:(0,i.t)(l,"menuItems")}):null,f?(0,r.jsx)(s.default,{href:"/owner/desks",className:"underline",children:(0,i.t)(l,"desks")}):null,"OWNER"===n||"MANAGER"===n||"STAFF"===n?(0,r.jsx)(s.default,{href:"/owner/analytics",className:"underline",children:(0,i.t)(l,"STAFF"===n?"dailyRevenue":"analytics")}):null,h?(0,r.jsx)(s.default,{href:"/owner/users",className:"underline",children:(0,i.t)(l,"users")}):null,h?(0,r.jsx)(s.default,{href:"/owner/sms",className:"underline",children:(0,i.t)(l,"smsTools")}):null,h?(0,r.jsx)(s.default,{href:"/owner/db-tools",className:"underline",children:(0,i.t)(l,"dbTools")}):null,(0,r.jsx)("button",{onClick:d,className:"ml-auto rounded border px-3 py-1 hover:bg-gray-50",children:(0,i.t)(l,"logout")})]})}},1837:function(e,n,t){"use strict";t.d(n,{S:function(){return s}});var r=t(257);async function s(e,n){let t=r.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",s=await fetch("".concat(t).concat(e),{...n,credentials:"include"});if(!s.ok)throw Error(await s.text()||"Request failed: ".concat(s.status));return(s.headers.get("content-type")||"").includes("application/json")?s.json():s.text()}},82:function(e,n,t){"use strict";function r(e){let n=(e||"").toLowerCase().trim();return"ar"===n||"ar-eg"===n||"ar_eg"===n||"ar-egypt"===n?"ar-eg":"en"}t.d(n,{AE:function(){return r},t:function(){return o}});let s={en:{langName:"English",langSwitch:"Language",login:"Login",email:"Email",password:"Password",signIn:"Sign in",logout:"Log out",dashboard:"Dashboard",analytics:"Analytics",dailyRevenue:"Daily revenue",totalRevenueAllTime:"Total revenue (all time)",todayRevenue:"Today's revenue",openBookings:"Open bookings",openOrders:"Open orders",requests:"Requests",bookings:"Bookings",desks:"Desks",menuItems:"Menu items",users:"Users",dbTools:"DB tools",smsTools:"SMS",save:"Save",setAllHourlyRates:"Set hourly rate for ALL desks",hourlyRate:"Hourly rate",runDbPush:"Push schema to DB",runDbReset:"Reset DB (danger)",runSeed:"Seed demo data",enableDbToolsHint:"Set ENABLE_DB_TOOLS=true in backend .env to enable these buttons.",sendTestSms:"Send test SMS",adminPhone:"Admin phone",message:"Message"},"ar-eg":{langName:"عربي (مصر)",langSwitch:"اللغة",login:"تسجيل الدخول",email:"الإيميل",password:"كلمة السر",signIn:"دخول",logout:"تسجيل خروج",dashboard:"لوحة التحكم",analytics:"الإحصائيات",dailyRevenue:"إيراد يومي",totalRevenueAllTime:"إجمالي الإيراد (من البداية)",todayRevenue:"إيراد النهارده",openBookings:"حجوزات مفتوحة",openOrders:"طلبات مفتوحة",requests:"الطلبات",bookings:"الحجوزات",desks:"المكاتب",menuItems:"المنتجات",users:"المستخدمين",dbTools:"أدوات قاعدة البيانات",smsTools:"رسائل SMS",save:"حفظ",setAllHourlyRates:"تعيين سعر الساعة لكل المكاتب",hourlyRate:"سعر الساعة",runDbPush:"تطبيق الـ Schema على قاعدة البيانات",runDbReset:"مسح وإعادة تهيئة الداتا (خطر)",runSeed:"تحميل داتا تجريبية",enableDbToolsHint:"فعّل ENABLE_DB_TOOLS=true في ملف backend .env علشان الأزرار تشتغل.",sendTestSms:"إرسال SMS تجريبي",adminPhone:"موبايل الأدمن",message:"الرسالة"}};function o(e,n){var t,r,o;return null!==(o=null!==(r=null===(t=s[e])||void 0===t?void 0:t[n])&&void 0!==r?r:s.en[n])&&void 0!==o?o:n}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=572)}),_N_E=e.O()}]);