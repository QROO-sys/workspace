(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[212],{6556:function(e,n,t){Promise.resolve().then(t.bind(t,4612))},7648:function(e,n,t){"use strict";t.d(n,{default:function(){return s.a}});var r=t(2972),s=t.n(r)},9376:function(e,n,t){"use strict";var r=t(5475);t.o(r,"usePathname")&&t.d(n,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(n,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(n,{useSearchParams:function(){return r.useSearchParams}})},257:function(e,n,t){"use strict";var r,s;e.exports=(null==(r=t.g.process)?void 0:r.env)&&"object"==typeof(null==(s=t.g.process)?void 0:s.env)?t.g.process:t(4227)},4227:function(e){!function(){var n={229:function(e){var n,t,r,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function u(){throw Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{t="function"==typeof clearTimeout?clearTimeout:u}catch(e){t=u}}();var l=[],i=!1,c=-1;function d(){i&&r&&(i=!1,r.length?l=r.concat(l):c=-1,l.length&&f())}function f(){if(!i){var e=a(d);i=!0;for(var n=l.length;n;){for(r=l,l=[];++c<n;)r&&r[c].run();c=-1,n=l.length}r=null,i=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===u||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(n){try{return t.call(null,e)}catch(n){return t.call(this,e)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function m(){}s.nextTick=function(e){var n=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];l.push(new h(e,n)),1!==l.length||i||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},t={};function r(e){var s=t[e];if(void 0!==s)return s.exports;var o=t[e]={exports:{}},u=!0;try{n[e](o,o.exports,r),u=!1}finally{u&&delete t[e]}return o.exports}r.ab="//";var s=r(229);e.exports=s}()},4440:function(e,n,t){"use strict";t.d(n,{default:function(){return i}});var r=t(7437),s=t(7648),o=t(9376),u=t(1837),a=t(2265),l=t(82);function i(e){let{role:n}=e,t=(0,o.useRouter)(),[i,c]=(0,a.useState)("en");async function d(){try{await (0,u.S)("/auth/logout",{method:"POST"})}catch(e){}t.push("/login"),t.refresh()}(0,a.useEffect)(()=>{if("undefined"==typeof document)return;let e=document.cookie.match(/(?:^|; )lang=([^;]+)/);c((0,l.AE)(e?decodeURIComponent(e[1]):"en"))},[]);let f="OWNER"===n||"MANAGER"===n,h="OWNER"===n;return(0,r.jsxs)("nav",{className:"mb-4 flex flex-wrap items-center gap-4",children:[(0,r.jsx)(s.default,{href:"/owner/dashboard",className:"underline",children:(0,l.t)(i,"dashboard")}),(0,r.jsx)(s.default,{href:"/owner/sessions",className:"underline",children:"Sessions"}),(0,r.jsx)(s.default,{href:"/owner/bookings",className:"underline",children:(0,l.t)(i,"bookings")}),(0,r.jsx)(s.default,{href:"/owner/requests",className:"underline",children:(0,l.t)(i,"requests")}),f?(0,r.jsx)(s.default,{href:"/owner/menu",className:"underline",children:(0,l.t)(i,"menuItems")}):null,f?(0,r.jsx)(s.default,{href:"/owner/desks",className:"underline",children:(0,l.t)(i,"desks")}):null,"OWNER"===n||"MANAGER"===n||"STAFF"===n?(0,r.jsx)(s.default,{href:"/owner/analytics",className:"underline",children:(0,l.t)(i,"STAFF"===n?"dailyRevenue":"analytics")}):null,h?(0,r.jsx)(s.default,{href:"/owner/users",className:"underline",children:(0,l.t)(i,"users")}):null,h?(0,r.jsx)(s.default,{href:"/owner/sms",className:"underline",children:(0,l.t)(i,"smsTools")}):null,h?(0,r.jsx)(s.default,{href:"/owner/db-tools",className:"underline",children:(0,l.t)(i,"dbTools")}):null,(0,r.jsx)("button",{onClick:d,className:"ml-auto rounded border px-3 py-1 hover:bg-gray-50",children:(0,l.t)(i,"logout")})]})}},4612:function(e,n,t){"use strict";t.d(n,{default:function(){return a}});var r=t(7437),s=t(2265),o=t(4440),u=t(1837);function a(e){let{children:n}=e,[t,a]=(0,s.useState)(null),[l,i]=(0,s.useState)(null);return((0,s.useEffect)(()=>{let e=!0;return(0,u.S)("/auth/me").then(n=>{e&&a((null==n?void 0:n.user)||null)}).catch(n=>{e&&i((null==n?void 0:n.message)||"Unauthorized")}),()=>{e=!1}},[]),l)?(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("div",{className:"font-semibold",children:"Access problem"}),(0,r.jsx)("div",{className:"mt-1 text-sm text-gray-700",children:l})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)(o.default,{role:null==t?void 0:t.role}),n]})}},1837:function(e,n,t){"use strict";t.d(n,{S:function(){return s}});var r=t(257);async function s(e,n){let t=r.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",s=await fetch("".concat(t).concat(e),{...n,credentials:"include"});if(!s.ok)throw Error(await s.text()||"Request failed: ".concat(s.status));return(s.headers.get("content-type")||"").includes("application/json")?s.json():s.text()}},82:function(e,n,t){"use strict";function r(e){let n=(e||"").toLowerCase().trim();return"ar"===n||"ar-eg"===n||"ar_eg"===n||"ar-egypt"===n?"ar-eg":"en"}t.d(n,{AE:function(){return r},t:function(){return o}});let s={en:{langName:"English",langSwitch:"Language",login:"Login",email:"Email",password:"Password",signIn:"Sign in",logout:"Log out",dashboard:"Dashboard",analytics:"Analytics",dailyRevenue:"Daily revenue",totalRevenueAllTime:"Total revenue (all time)",todayRevenue:"Today's revenue",openBookings:"Open bookings",openOrders:"Open orders",requests:"Requests",bookings:"Bookings",desks:"Desks",menuItems:"Menu items",users:"Users",dbTools:"DB tools",smsTools:"SMS",save:"Save",setAllHourlyRates:"Set hourly rate for ALL desks",hourlyRate:"Hourly rate",runDbPush:"Push schema to DB",runDbReset:"Reset DB (danger)",runSeed:"Seed demo data",enableDbToolsHint:"Set ENABLE_DB_TOOLS=true in backend .env to enable these buttons.",sendTestSms:"Send test SMS",adminPhone:"Admin phone",message:"Message"},"ar-eg":{langName:"عربي (مصر)",langSwitch:"اللغة",login:"تسجيل الدخول",email:"الإيميل",password:"كلمة السر",signIn:"دخول",logout:"تسجيل خروج",dashboard:"لوحة التحكم",analytics:"الإحصائيات",dailyRevenue:"إيراد يومي",totalRevenueAllTime:"إجمالي الإيراد (من البداية)",todayRevenue:"إيراد النهارده",openBookings:"حجوزات مفتوحة",openOrders:"طلبات مفتوحة",requests:"الطلبات",bookings:"الحجوزات",desks:"المكاتب",menuItems:"المنتجات",users:"المستخدمين",dbTools:"أدوات قاعدة البيانات",smsTools:"رسائل SMS",save:"حفظ",setAllHourlyRates:"تعيين سعر الساعة لكل المكاتب",hourlyRate:"سعر الساعة",runDbPush:"تطبيق الـ Schema على قاعدة البيانات",runDbReset:"مسح وإعادة تهيئة الداتا (خطر)",runSeed:"تحميل داتا تجريبية",enableDbToolsHint:"فعّل ENABLE_DB_TOOLS=true في ملف backend .env علشان الأزرار تشتغل.",sendTestSms:"إرسال SMS تجريبي",adminPhone:"موبايل الأدمن",message:"الرسالة"}};function o(e,n){var t,r,o;return null!==(o=null!==(r=null===(t=s[e])||void 0===t?void 0:t[n])&&void 0!==r?r:s.en[n])&&void 0!==o?o:n}}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=6556)}),_N_E=e.O()}]);